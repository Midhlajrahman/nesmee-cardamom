{% load static %}
<!DOCTYPE html>
<html lang="zxx">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Title -->
    <title>Nesmee Cardamom | Premium, Sustainable & Health-Boosting Cardamom</title>
    <!-- Favicon Icon -->
    <link rel="shortcut icon" href="{% static 'web/assets/images/logos/logo.png' %}" type="image/x-icon">
    <!-- Google Fonts -->
    <link href="{% static 'web/fonts.googleapis.com/css2a707.css' %}" rel="stylesheet">
    
    <!-- Flaticon -->
    <link rel="stylesheet" href="{% static 'web/assets/css/flaticon.min.css' %}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'web/assets/css/fontawesome-5.14.0.min.css' %}">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="{% static 'web/assets/css/bootstrap.min.css' %}">
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="{% static 'web/assets/css/magnific-popup.min.css' %}">
    <!-- Nice Select -->
    <link rel="stylesheet" href="{% static 'web/assets/css/nice-select.min.css' %}">
    <!-- Animate -->
    <link rel="stylesheet" href="{% static 'web/assets/css/aos.css' %}">
    <!-- Slick -->
    <link rel="stylesheet" href="{% static 'web/assets/css/slick.min.css' %}">
    <!-- Main Style -->
    <link rel="stylesheet" href="{% static 'web/assets/css/style.css' %}">

    <link rel="stylesheet" href="{% static 'web/assets/css/custom.css' %}">
    
</head>
<body>
    <div class="page-wrapper">

        <!-- Preloader -->
        <div class="preloader"><div class="custom-loader"></div></div>

        {% include "web/partials/header.html" %}
       

        <!--Form Back Drop-->
        <div class="form-back-drop"></div>
        
        <!-- Hidden Sidebar -->
        <section class="hidden-bar">
            <div class="inner-box text-center">
                <div class="cross-icon"><span class="fa fa-times"></span></div>
                <div class="title">
                    <h4>Enquiry Form</h4>
                </div>

                <!--Appointment Form-->
                <div class="appointment-form">
                    <form id="appointmentForm" method="post" action="{% url 'web:pop_contact' %}">
                        {% csrf_token %}
                        <div class="form-group">
                            {{form.name}}
                        </div>
                        <div class="form-group">
                            {{form.email}}
                        </div>
                        <div class="form-group">
                            {{form.number}}
                        </div>
                        <div class="form-group">
                            {{form.subject}}
                        </div>
                        <div class="form-group">
                            {{form.message}}
                        </div>
                        <div class="form-group">
                            <button type="submit" class="theme-btn style-two">Submit now</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
        <!--End Hidden Sidebar -->

            {% block content %}

            {% endblock  %}

        
      {% include "web/partials/footer.html" %}

      <!-- Scroll Top Button -->
      {% comment %} <button class="scroll-top scroll-to-target" data-target="html"><span class="far fa-angle-double-up"></span></button> {% endcomment %}
  </div>
  <!--End pagewrapper-->

  
  <!-- Jquery -->
  <script src="{% static 'web/assets/js/jquery-3.6.0.min.js' %}"></script>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Bootstrap -->
  <script src="{% static 'web/assets/js/bootstrap.min.js' %}"></script>
  <!-- Appear Js -->
  <script src="{% static 'web/assets/js/appear.min.js' %}"></script>
  <!-- Slick -->
  <script src="{% static 'web/assets/js/slick.min.js' %}"></script>
  <!-- Magnific Popup -->
  <script src="{% static 'web/assets/js/jquery.magnific-popup.min.js' %}"></script>
  <!-- Nice Select -->
  <script src="{% static 'web/assets/js/jquery.nice-select.min.js' %}"></script>
  <!-- Image Loader -->
  <script src="{% static 'web/assets/js/imagesloaded.pkgd.min.js' %}"></script>
  <!-- Circle Progress -->
  <script src="{% static 'web/assets/js/circle-progress.min.js' %}"></script>
  <!-- Isotope -->
  <script src="{% static 'web/assets/js/isotope.pkgd.min.js' %}"></script>
  <!--  Aos Animation -->
  <script src="{% static 'web/assets/js/aos.js' %}"></script>
  <!-- Custom script -->
  <script src="{% static 'web/assets/js/script.js' %}"></script>
  
  <script>
    $(document).ready(function () {
        $('#appointmentForm').on('submit', function (e) {
            e.preventDefault(); // Prevent the default form submission

            $.ajax({
                type: 'POST',
                url: $(this).attr('action'),
                data: $(this).serialize(),
                success: function (response) {
                    if (response.status === 'success') {
                        // Show SweetAlert for success
                        Swal.fire({
                            icon: 'success',
                            title: 'Form Submitted Successfully',
                            text: 'Thank you for contacting us. We will get back to you soon!',
                            confirmButtonText: 'OK'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                // Redirect to WhatsApp URL
                                window.location.href = response.whatsapp_url;
                            }
                        });
                    } else {
                        // Show SweetAlert for error
                        Swal.fire({
                            icon: 'error',
                            title: 'Submission Failed',
                            text: 'Something went wrong. Please try again later.',
                            confirmButtonText: 'OK'
                        });
                    }
                },
                error: function () {
                    // Show SweetAlert for AJAX error
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: 'Unable to process your request at the moment.',
                        confirmButtonText: 'OK'
                    });
                }
            });
        });
    });
</script>

</body>
</html>